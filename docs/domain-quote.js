var k={SAVE1:{rate:.01,extensions:["com","net"],startAt:"2023-01-01T00:00:00Z",endAt:"2025-12-31T23:59:59Z"},NEWUSER15:{rate:.15,extensions:["com","net","org"],startAt:"2023-01-01T00:00:00Z",endAt:"2024-12-31T23:59:59Z"},FALL20:{rate:.2,extensions:["org","info"],startAt:"2024-09-01T00:00:00Z",endAt:"2024-12-01T00:00:00Z"}};var v={US:0,GB:.2,DE:.19,NG:.075};var b={USD:"US",GBP:"GB",EUR:"DE",NGN:"NG"};function ie(){return Object.keys(b)}function oe(t){return t!=null&&b.hasOwnProperty(t.toUpperCase())}function ce(){let t=E();return Object.keys(t).sort()}function ae(t){let e=E(),r=O(e,t),n=e[r];return typeof n=="number"&&n>0}function O(t,e){if(!e)return e;let n=e.trim().toLowerCase().replace(/^\.+/,"");if(!n)return"";if(t.hasOwnProperty(n))return n;if(n.includes(".")){let s=n.split(".");for(let o=0;o<s.length;o++){let c=s.slice(o).join(".");if(t.hasOwnProperty(c))return c}return s[s.length-1]}return n}function V(t){return t instanceof Date?t.getTime():typeof t=="number"?t:Date.now()}var j="https://raw.githubusercontent.com/namewiz/registrar-pricelist/refs/heads/main/data/unified-create-prices.csv",F="https://raw.githubusercontent.com/namewiz/registrar-pricelist/refs/heads/main/data/exchange-rates.json";async function L(t){let e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch ${t}: ${e.status} ${e.statusText}`);return e.text()}async function Z(t){let e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch ${t}: ${e.status} ${e.statusText}`);return e.json()}function B(t){let e=t.split(/\r?\n/).map(s=>s.trim()).filter(Boolean);if(e.length===0)return{};let r=e.shift(),n={};for(let s of e){let o=s.split(",");if(o.length<3)continue;let c=o[0]?.trim().toLowerCase(),i=o[2]?.trim(),a=Number(i);!c||!Number.isFinite(a)||a<=0||(!(c in n)||a<n[c])&&(n[c]=a)}return n}var[J,z]=await Promise.all([L(j).then(B),Z(F)]);function E(){return J}function X(){return z}function H(){return v}function q(){return k}var h=class extends Error{constructor(e,r){super(r),this.name="DomainPricesError",this.code=e}},P=class extends h{constructor(e){super("ERR_UNSUPPORTED_EXTENSION",`Unsupported extension: ${e}`),this.name="UnsupportedExtensionError"}},l=class extends h{constructor(e){super("ERR_UNSUPPORTED_CURRENCY",`Unsupported currency: ${e}`),this.name="UnsupportedCurrencyError"}};function W(){return{countryCode:"US",currencyName:"United States Dollar",currencySymbol:"$",currencyCode:"USD",exchangeRate:1,inverseRate:1}}function p(t){return Math.round(t*100)/100}function Y(t,e){if(!e)return t;let r=typeof e.value=="number"?e.value:0;if(!Number.isFinite(r)||r<=0)return t;switch(e.type){case"percentage":return t+t*r;case"fixedUsd":return t+r;default:return t}}var y=class{constructor(e){this.config=e}findRateInfo(e){if(e==="USD")return W();let r=this.config.exchangeRates.find(n=>n.currencyCode===e);if(!r)throw new l(e);return r}async getPrice(e,r,n={}){let s=this.config.createPrices,o=this.config.vatRates,c=this.config.discounts,i=O(s,e),a=n.transaction||"create",u;switch(a){case"renew":u=this.config.renewPrices?.[i]??s[i];break;case"restore":u=this.config.restorePrices?.[i]??s[i];break;case"transfer":u=this.config.transferPrices?.[i]??s[i];break;case"create":default:u=s[i];break}if(u===void 0||u===0)throw new P(i);let R=(r||"").toUpperCase(),w=b[R];if(!w)throw new l(r);let D=o[w];if(typeof D!="number")throw new l(r);let T=this.findRateInfo(R),G=T.currencySymbol,_=Y(u,this.config.markup),d=p(_*T.exchangeRate),Q=Array.from(new Set((n.discountCodes||[]).map(m=>m.toUpperCase()))),C=V(n.now),x=[];for(let m of Q){let f=c[m];if(!f)continue;let U=Date.parse(f.startAt),A=Date.parse(f.endAt);Number.isNaN(U)||Number.isNaN(A)||C<U||C>A||f.extensions.includes(i)&&x.push(p(d*f.rate))}let g=0;x.length>0&&(n.discountPolicy==="stack"?g=p(x.reduce((m,f)=>m+f,0)):g=Math.max(...x)),g>d&&(g=d);let S=p(d-g),N=p(S*D),I=p(S+N);return{extension:i,currency:R,basePrice:d,discount:g,tax:N,totalPrice:I,symbol:G,transaction:a}}async getQuote(e,r,n={}){return this.getPrice(e,r,n)}},K={createPrices:E(),exchangeRates:X(),vatRates:H(),discounts:q()};async function ee(t,e,r={}){return new y(K).getPrice(t,e,r)}async function ue(t,e,r={}){return ee(t,e,r)}export{K as DEFAULT_RATES,y as DomainPrices,y as DomainQuote,l as UnsupportedCurrencyError,P as UnsupportedExtensionError,ee as getDefaultPrice,ue as getDefaultQuote,oe as isSupportedCurrency,ae as isSupportedExtension,ie as listSupportedCurrencies,ce as listSupportedExtensions};
